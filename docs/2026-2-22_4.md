• GAP-SUI-06 已继续完成并落地。

  核心改动

  - 修复 nested use 只展开一层的问题，改为递归展开叶子 speck：src/main/kotlin/org/sui/lang/core/resolve2/util/PathUtil.kt:14
  - 同步修复 use item 收集逻辑，适配新遍历语义：src/main/kotlin/org/sui/lang/core/resolve2/LexicalDeclarations2.kt:342
  - 修复 use-group 路径分类，在地址级 nested use 下允许先解析模块再解析项：src/main/kotlin/org/sui/lang/core/resolve2/PathKind.kt:63
  - 修复限定路径在 unresolved qualifier 时对 value/named address 的模块解析兜底：src/main/kotlin/org/sui/lang/core/resolve2/ref/MvPath2ReferenceImpl.kt:168

  回归测试

  - resolve（nested use + alias/Self/value address）：src/test/kotlin/org/sui/lang/resolve/ResolveModulesTest.kt:509
  - optimize imports（仅移除 nested 未使用叶子，保留语义）：src/test/kotlin/org/sui/ide/refactoring/optimizeImports/OptimizeImportsTest.kt:377
  - completion（nested use 场景）：src/test/kotlin/org/sui/lang/completion/names/ModulesCompletionTest.kt:74
  - project 级 completion 回归：src/test/kotlin/org/sui/lang/completion/names/project/ModulesCompletionProjectTest.kt:82

  文档

  - GAP-SUI-06 任务与 DoD 已勾选：docs/github-issues/sui-move-2024/06-nested-use-and-std-default-use.md:11
  - 当次推进记录已新增：docs/2026-2-22_3.md:1

  验证结果

  - ./gradlew test --tests "org.sui.lang.resolve.ResolveModulesTest" --tests "org.sui.lang.completion.names.ModulesCompletionTest" --tests
    "org.sui.lang.completion.names.project.ModulesCompletionProjectTest" --tests "org.sui.ide.refactoring.optimizeImports.OptimizeImportsTest" --no-daemon 通过
  - ./gradlew test --no-daemon 通过（BUILD SUCCESSFUL）

  可直接继续下一项。

  1. 继续 GAP-SUI-07（legacy TODO + test debt）
  2. 继续 GAP-SUI-08（verifyPlugin hardening）

---

• 已继续完成 GAP-SUI-07（legacy TODO + test debt）。

  核心改动

  - 将注释停用的 `AllowedSpecStatementsTest` 恢复为可执行测试类，并落地 inline/item spec 场景断言：
    `src/test/kotlin/org/sui/ide/annotator/syntaxErrors/AllowedSpecStatementsTest.kt:1`
  - 恢复 `AcquiresTypesTest` 中递归与传递递归 inline 场景测试，替换历史 TODO 注释：
    `src/test/kotlin/org/sui/lang/types/AcquiresTypesTest.kt:255`
  - 修复递归 inline acquires 计算栈溢出，为函数级 acquires 推断增加“计算中”循环保护：
    `src/main/kotlin/org/sui/lang/core/types/infer/Acquires.kt:53`

  回归测试

  - `./gradlew test --tests "org.sui.lang.types.AcquiresTypesTest" --no-daemon` 通过
  - `./gradlew test --tests "org.sui.ide.annotator.syntaxErrors.AllowedSpecStatementsTest" --no-daemon` 通过
  - `./gradlew test --no-daemon` 通过（BUILD SUCCESSFUL）

  文档

  - GAP-SUI-07 任务与 DoD 已勾选：
    `docs/github-issues/sui-move-2024/07-legacy-todo-test-debt.md:1`

  可直接继续下一项。

  1. 继续 GAP-SUI-08（verifyPlugin hardening）

---

• 已继续完成 GAP-SUI-08（verifyPlugin hardening）。

  核心改动

  - 移除 internal API 依赖（并收紧 verifier 门禁）：
    - `src/main/kotlin/org/sui/cli/settings/MvProjectSettingsService.kt:195`
    - `src/main/kotlin/org/sui/cli/sentryReporter/SentryErrorReporter.kt:1`
  - verifier 配置改为显式可控，固定 IDE 坐标与 installer 模式：
    - `build.gradle.kts:42`
    - `gradle-253.properties:19`
    - `gradle-261.properties:17`
  - 收紧 failure level：默认不再豁免 `INTERNAL_API_USAGES`（仅保留可配置回退开关）。
  - CI/PR 报告增强：
    - 新增摘要脚本：`.github/scripts/plugin-verifier-summary.sh:1`
    - workflow 增加 summary + artifact 上传 + internal budget 守门：
      `.github/workflows/check.yml:12`
  - 新增治理文档（坐标、清单、分阶段计划）：
    - `docs/verifyplugin-hardening.md:1`

  验证结果

  - `./gradlew verifyPlugin --no-daemon`（253）通过：
    `Compatible. ... experimental API. (internal=0)`
  - `ORG_GRADLE_PROJECT_shortPlatformVersion=261 ./gradlew verifyPlugin --no-daemon`（261）通过：
    `Compatible. ... experimental API. (internal=0)`

  文档

  - GAP-SUI-08 任务与 DoD 已勾选：
    `docs/github-issues/sui-move-2024/08-verifyplugin-hardening.md:1`

  本轮后可继续的收敛方向：

  1. 阶段 B：为 `SCHEDULED_FOR_REMOVAL_API_USAGES` 建预算并持续压降
  2. 阶段 C：为 `DEPRECATED_API_USAGES` 建预算并逐步去豁免

---

• 已继续完成 GAP-SUI-02（break value expressions）。

  结论

  - 当前代码已具备 `break <expr>` 解析与推断能力（含 label 场景），本轮主要完成任务对齐与回归确认；
    无需新增语义代码改动即可满足 DoD。

  覆盖现状（已在仓库中）

  - parser：`break 1`、`break 'outer 2`、`while/for` 中 break value
    - `src/test/resources/org/sui/lang/parser/complete/break_values.move:1`
    - `src/test/resources/org/sui/lang/parser/complete/break_values.txt:1`
  - 类型推断：loop break value 推断与 labeled break 外层汇合
    - `src/test/kotlin/org/sui/lang/types/ExpressionTypesTest.kt:1146`
  - 冲突诊断：break value 类型冲突报错稳定
    - `src/test/kotlin/org/sui/ide/inspections/MvTypeCheckInspectionTest.kt:897`
  - break 表达式 PSI 类型与 legacy `break` 行为兼容
    - `src/test/kotlin/org/sui/lang/types/BreakExprTest.kt:5`

  验证结果

  - `./gradlew test --tests "org.sui.lang.types.BreakExprTest" --tests "org.sui.lang.types.ExpressionTypesTest" --tests "org.sui.ide.inspections.MvTypeCheckInspectionTest" --tests "org.sui.lang.parser.CompleteParsingTest" --no-daemon`
    通过（BUILD SUCCESSFUL）

  文档

  - GAP-SUI-02 任务与 DoD 已勾选：
    `docs/github-issues/sui-move-2024/02-break-value-expressions.md:1`
